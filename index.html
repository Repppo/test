<!DOCTYPE html>
<html>
	<head>
		<title>Reppo's Repo</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="styles.css">
		<script> 
			function play_sound(clicked_id) {
				var audio = new Audio(clicked_id + ".mp3");
				audio.play();
			} 
		</script>
		<script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
	</head>
		  
<body>
	<h1>Ciao a tutti</h1>
	<p>Questo e il sito di Lugio.</p>
	<p>Prima o poi diventerà tanta roba</p> 
	<iframe width="560" height="315" src="https://www.youtube.com/embed/-wos6sPB0Z4?si=ksHjcxs7whfBCyhb" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

	<div class="container">
		<div class="center">
			<button id="sivabbe" onClick="play_sound(this.id)">Si vabbe ma</button>
			<button id="echecculo" onClick="play_sound(this.id)">Ecchecculo</button>
		</div>
	  </div>
	
	  <div class="container">
        <h2>Controllo Volume</h2>
        <audio id="audioPlayer" controls>
            <source src="sivabbe.mp3" type="audio/mpeg">
            Il tuo browser non supporta l'elemento audio.
        </audio>
        <br>

        <!-- Dial per il volume -->
        <div class="dial" id="volumeDial">Vol</div>
        <br>

        <h2>Scorrimento Audio</h2>
        <!-- Dial per la posizione -->
        <div class="dial" id="seekDial">Seek</div>
    </div>

	<br>
	<br> 

    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
    <script>
        const audio = document.getElementById('audioPlayer');
        let volume = 1; // Volume iniziale
        let seekPos = 0; // Posizione iniziale

        function setupDial(id, onRotate) {
            let angle = 0;

            interact(`#${id}`).draggable({
                onmove(event) {
                    angle += event.dx / 2; // Ruota in base al movimento
                    if (angle < 0) angle = 0;
                    if (angle > 270) angle = 270; // Limita a 270° per un range più naturale

                    document.getElementById(id).style.transform = `rotate(${angle}deg)`;

                    // Calcola valore normalizzato tra 0 e 1
                    const value = angle / 270;
                    onRotate(value);
                }
            });
        }

        // Dial per il volume
        setupDial('volumeDial', (value) => {
            audio.volume = value;
            document.getElementById('volumeDial').textContent = `Volume: ${(value * 100).toFixed(0)}%`;
        });

		// Dial per lo scorrimento della traccia audio (più preciso)
		setupDial('seekDial', (value) => {
			if (audio.duration) {
				const preciseTime = (value * audio.duration).toFixed(2); // Due decimali
				audio.currentTime = preciseTime;
				document.getElementById('seekDial').textContent = `Sec: ${preciseTime}`;
			}
		});

    </script>
</body>
</html>
